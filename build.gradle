buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'biz.aQute.bnd:biz.aQute.bnd.gradle:3.0.0'
    }
}

group 'fi.jarimatti.sample'
version '0.0.1-SNAPSHOT'

apply plugin: 'java'
apply plugin: 'biz.aQute.bnd.builder'
apply plugin: 'maven-publish'

sourceCompatibility = 1.8

repositories {
    jcenter()
    mavenCentral()
}

dependencies {
    compile 'org.osgi:org.osgi.core:5.0.0'
    compile 'biz.aQute.bnd:biz.aQute.bndlib:3.0.0'

    compile 'org.slf4j:slf4j-api:1.7.12'

    compile 'org.apache.camel:camel-core:2.16.1'
    compile 'org.apache.camel:camel-core-osgi:2.16.1'
    compile 'org.apache.camel:camel-spark-rest:2.16.1'

    testCompile group: 'junit', name: 'junit', version: '4.12'
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java
        }

        karafFeature(MavenPublication) {
            groupId 'fi.jarimatti.sample.features'
            artifactId 'rest-api'

            artifact("src/main/features/features.xml") {
                classifier "feature"
                extension "xml"
            }
        }
    }
}
